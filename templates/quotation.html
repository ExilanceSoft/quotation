<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quotation {{quotation_number}}</title>
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari&display=swap');

    body {
      font-family: 'Noto Sans Devanagari', 'Lohit Devanagari', sans-serif;
      line-height: 1.4;
      color: #000;
      padding: 15px;
      font-size: 12px;
    }
    .fixed-columns th,
    .fixed-columns td {
      width: 25%; /* For 4 columns (100%/4) */
    }
    .branch-name {
      text-transform: uppercase;
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 3px;
    }
    .thank-you,
    .optional-services {
      font-weight: bold;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      padding-bottom: 0px;
      border-bottom: 1px solid #0000002a;
      margin-bottom: 8px;
    }

    .header-left, .header-center {
      flex: 1;
    }
    .terms-condition-item {
      margin-bottom: 0 !important;
      padding-bottom: 0 !important;
      line-height: 1.2;
    }
    .company-address,
    .company-contact,
    .company-gst {
      font-size: 11px;
      margin-bottom: 3px;
    }

    .company-gst {
      margin-top: 46px;
      margin-bottom: 20px;
    }

    .quotation-title {
      font-size: 16px;
      font-weight: bold;
    }

    .quotation-number,
    .quotation-date {
      font-size: 11px;
      margin-bottom: 5px;
    }

    .company-logo {
      max-height: 60px;
      max-width: 100px;
    }

    .section-title {
      font-weight: bold;
      border-top: 1px solid #00000030;
      padding-bottom: 3px;
      margin-bottom: 5px;
      font-size: 12px;
    }

    .offers-title {
      font-weight: bold;
      font-size: 16px;
    }

    .customer-info {
      margin-bottom: 15px;
      border-bottom: 1px solid #0000002a;
    }

    .info-line {
      display: flex;
      margin-bottom: 5px;
      flex-wrap: wrap;
    }

    .info-pair {
      display: flex;
      align-items: baseline;
      margin-right: 30px;
      min-width: 45%;
    }

    .info-value {
      margin-left: 5px;
      flex-grow: 1;
    }

    strong {
      min-width: 70px;
      display: inline-block;
    }

    .table {
      width: 100%;
      border-collapse: collapse;
      margin: 10px 0;
      font-size: 11px;
    }

    .table th {
      text-align: left;
      padding: 5px;
      border: 1px solid #0000002b;
    }

    .table td {
      padding: 5px;
      border: 1px solid #0000002b;
    }

    .text-right {
      text-align: right;
    }

    .text-center {
      text-align: center;
    }

    .signature-block {
      margin-top: 30px;
      display: flex;
      justify-content: space-between;
    }

    .signature-line {
      width: 200px;
      border-top: 1px solid #000;
      margin-top: 40px;
    }

    .offer-section {
      margin: 10px 0;
      padding: 8px;
      font-size: 11px;
    }

    .finance-doc-item {
      margin-bottom: 5px;
      font-size: 11px;
      display: flex;
      align-items: center;
    }

    .terms-condition-item {
      margin-bottom: 10px;
      font-size: 11px;
    }

    .terms-condition-title {
      font-weight: bold;
      margin-bottom: 3px;
    }

    .documents-list {
      margin-top: 10px;
    }

    .document-item {
      display: flex;
      align-items: center;
      margin-bottom: 5px;
      padding: 5px 0;
    }

    .document-checkbox {
      margin-right: 10px;
      width: 12px;
      height: 12px;
    }

    .document-name {
      flex-grow: 1;
    }

    .thank-you {
      border-top: 1px solid #00000030;
      margin: 10px 0;
      font-size: 12px;
      text-align: center;
    }

    .optional-services {
      border-top: 1px solid #00000030;
      margin: 10px 0 15px 0;
      font-size: 12px;
      text-align: center;
    }

    .price-disclaimer {
      margin: 10px 0;
      font-size: 11px;
      text-align: justify;
      line-height: 1.4;
    }

    .terms-and-signature-container {
      display: flex;
      justify-content: space-between;
      margin-top: 15px;
    }

    .terms-container {
      width: 70%;
    }

    .signature-container {
      width: 25%;
      text-align: right;
    }
  </style>
</head>
<body>

  <!-- Header Section -->
  <div class="header">
    <div class="header-left">
      <div class="branch-name">{{userDetails.branch.name}}</div>
      <div class="company-address">{{userDetails.branch.address}}</div>
      <div class="company-contact">{{userDetails.branch.phone}}</div>
    </div>
    <div class="header-center">
      <div class="company-gst">{{userDetails.branch.gst_number}}</div>
      <div class="quotation-title">QUOTATION</div>
    </div>
    <div class="header-right">
      {{#if logoBase64}}
        <img src="{{logoBase64}}" alt="Company Logo" class="company-logo">
      {{/if}}
    </div>
  </div>

  <!-- Quotation Details -->
  <div class="quotation" style="display: flex; justify-content: space-between; margin-bottom: 10px;">
    <div class="quotation-left">
      <div class="quotation-number"><strong>Quotation No:</strong> {{quotation_number}}</div>
    </div>
    <div class="quotation-right">
      <div class="quotation-date"><strong>Date:</strong> {{createdDate}}</div>
    </div>
  </div>

  <!-- Customer Information -->
  <div class="customer-info">
    <div class="info-line">
      <strong>Name:</strong>
      <span class="info-value">{{customerDetails.name}}</span>
    </div>
    <div class="info-line">
      <strong>Address:</strong>
      <span class="info-value">{{customerDetails.address}}</span>
    </div>
    <div class="info-line">
      <div class="info-pair">
        <strong>Taluka:</strong>
        <span class="info-value">{{customerDetails.taluka}}</span>
      </div>
      <div class="info-pair">
        <strong>District:</strong>
        <span class="info-value">{{customerDetails.district}}</span>
      </div>
    </div>
    <div class="info-line">
      <div class="info-pair">
        <strong>Mobile 1:</strong>
        <span class="info-value">{{customerDetails.mobile1}}</span>
      </div>
      {{#if customerDetails.mobile2}}
      <div class="info-pair">
        <strong>Mobile 2:</strong>
        <span class="info-value">{{customerDetails.mobile2}}</span>
      </div>
      {{/if}}
    </div>
  </div>

  <!-- Page 1 Content -->
  <div class="section">
    <h4 style="margin-top: -14px;">Dear Sir,</h4>
    <p style="margin-top: -18px; margin-bottom: 0;">
      As per inquiry, we are pleased to quote the current prices for below mentioned models as under:
    </p>

    <table class="table fixed-columns">
      <thead>
        <tr>
          <th>Description</th>
          <th>{{getModelName AllModels 0}}</th>
          <th>{{getModelName AllModels 1}}</th>
          <th>{{getModelName AllModels 2}}</th>
        </tr>
      </thead>
      <tbody>
        {{#each (getPricesForPage AllModels.[0].prices 1)}}
          {{#if (eq category_key "vehicle_price")}}
          <tr>
            <td>{{header_key}}</td>
            <td class="text-right">{{formatCurrency (findPrice ../AllModels.[0].prices header_key)}}</td>
            <td class="text-right">{{formatCurrency (findPrice (lookup ../AllModels.[1] 'prices') header_key)}}</td>
            <td class="text-right">{{formatCurrency (findPrice (lookup ../AllModels.[2] 'prices') header_key)}}</td>
          </tr>
          {{/if}}
        {{else}}
          <tr>
            <td colspan="4" class="text-center">No items for this page</td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>

  <!-- Footer Section -->
   <div>
    <div class="section" style="text-align: right; margin-top: -11px;">
      <p>Finance Needed: {{#if customerDetails.finance_needed}}Yes{{else}}No{{/if}}</p>
      <p style="margin-bottom: -15px; font-weight: bold">{{userDetails.full_name}}</p>
      <p><strong style="font-size: 12px;">Gandhi Tvs Nashik</strong> ({{userDetails.mobile}})</p>
    </div>
    <!-- Finance and Delivery Info -->
    <div class="section">
      <p style="margin-top: -33px;">Expected Date: {{expectedDeliveryDate}}</p>
    </div>
  </div>

  <!-- Finance Documents Section -->
<div class="section">
  <div class="section-title">Documents Required for Finance:-</div>
  <div style="font-size: 11px;">
    {{#each financeDocuments}}
      {{#if (eq @index 0)}}* {{else}}{{#if (eq (mod @index 4) 0)}}<br>* {{/if}}{{/if}}
      <input type="checkbox" style="margin:0 2px 0 2px;vertical-align:middle;transform:scale(0.8);">
      {{name}}:{{description}}{{#unless @last}},{{/unless}}
    {{/each}}
  </div>
</div>

  <!-- Terms & Conditions Section -->
{{#if termsConditions.length}}
<div class="section" style="position: relative;">
  <div class="section-title">Terms and Conditions::</div>
  <div class="terms-and-signature-container">
    <div class="terms-container" style="margin-top: -5px;">
      {{#each termsConditions}}
      <div class="terms-condition-item" style="margin-bottom: 0; line-height: 1.2;">
        <div>{{math @index "+" 1}}). {{content}}</div>
      </div>
      {{/each}}
    </div>
    <!-- Signature Section -->
    <div class="signature-container" style="position: absolute; bottom: 0; right: 0;">
      <strong>For ({{userDetails.branch.name}})</strong>
      <strong>Authorised Signatory</strong>
    </div>
  </div>
</div>
{{/if}}
 {{#if allUniqueOffers.length}}
<div class="section">
  <div class="section-title">OFFER:</div>
  {{#each allUniqueOffers}}
    {{#if @first}} <!-- Only show the first offer -->
    <div class="offer-section">
      <p><strong style="font-size: 16px; font-style: italic;">{{title}}</strong></p>
      <p>{{description}}</p>
    </div>
    {{/if}}
  {{/each}}
</div>
{{/if}}
  <!-- Thank You Section -->
  <div class="thank-you">
    Thanking You and assuring you of our best services at all times.
  </div>
  <!-- Optional Services Section -->
  <div class="optional-services">
    Apart from the above we also provide below mentioned addon services and accessories which are optional:-
  </div>

  <!-- Page Break -->
  <div class="page-break"></div>

  <!-- Page 2 Content -->
  <div class="section">
    <table class="table fixed-columns">
      <tbody>
        {{#each (getPricesForPage AllModels.[0].prices 2)}}
          {{#if (eq category_key "vehicle_price")}}
          <tr>
            <td>{{header_key}}</td>
            <td class="text-right">{{formatCurrency (findPrice ../AllModels.[0].prices header_key)}}</td>
            <td class="text-right">{{formatCurrency (findPrice (lookup ../AllModels.[1] 'prices') header_key)}}</td>
            <td class="text-right">{{formatCurrency (findPrice (lookup ../AllModels.[2] 'prices') header_key)}}</td>
          </tr>
          {{/if}}
        {{else}}
          <tr>
            <td colspan="4" class="text-center">No items for this page</td>
          </tr>
        {{/each}}
      </tbody>
    </table>

    <!-- Accessories Section -->
    <div style="text-align: center; margin: 15px 0 5px 0;">
      <strong>Accessories</strong>
    </div>
    <table class="table fixed-columns">
      <tbody>
        {{#each (getPricesForPage AllModels.[0].prices 2)}}
          {{#if (or (eq category_key "AddONservices") (eq category_key "Accesories"))}}
          <tr>
            <td>{{header_key}}</td>
            <td class="text-right">{{formatCurrency (findPrice ../AllModels.[0].prices header_key)}}</td>
            <td class="text-right">{{formatCurrency (findPrice (lookup ../AllModels.[1] 'prices') header_key)}}</td>
            <td class="text-right">{{formatCurrency (findPrice (lookup ../AllModels.[2] 'prices') header_key)}}</td>
          </tr>
          {{/if}}
        {{else}}
          <tr>
            <td colspan="4" class="text-center">No accessories available</td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
 {{#if (gt allUniqueOffers.length 1)}} <!-- Only show if 2+ offers exist -->
<div class="section">
  <div class="offers-title">OFFERS:</div>
  {{#each allUniqueOffers}}
    {{#if (gt @index 0)}} <!-- Skip index 0 (first offer) -->
    <div class="offer-section">
      <p><strong>{{title}}</strong></p>
      <p>{{description}}</p>
    </div>
    {{/if}}
  {{/each}}
</div>
{{/if}}
</body>
</html>